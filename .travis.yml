language: python
env:
- MINICONDA="https://repo.continuum.io/miniconda/Miniconda2-latest-Linux-x86_64.sh"
  PYTHONVER="2.7" USER="pyiron"
- MINICONDA="https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh"
  PYTHONVER="3.5" USER="pyiron"
- MINICONDA="https://repo.continuum.io/miniconda/Miniconda3-latest-Linux-x86_64.sh"
  PYTHONVER="3.6" USER="pyiron"
install:
- sudo apt-get update
- wget ${MINICONDA} -O miniconda.sh
- bash miniconda.sh -b -p $HOME/miniconda
- export PATH="$HOME/miniconda/bin:$PATH"
- conda info -a
- conda config --set always_yes yes --set changeps1 no
- conda update -q conda
- conda install conda-build git make anaconda-client
- conda config --set anaconda_upload yes
script:
- pip install .
- cd tests
- python find_tests.py
- cd ..
- conda build --python ${PYTHONVER} --user ${USER} --token ${CONDA_UPLOAD_TOKEN} conda/pyironbase
deploy:
  provider: pypi
  user: pyiron
  password:
    secure: Iu/8wLIPBm8NRn3DOLKKQOz/Z6Dukls0ef+p/l2w7QugzYOZwIrl9WUAILv9BOTriHrHlVJfyGrKP8+zda6q/xxbi1wNGqFejSIoDnI29tsU62uNm7H2HeYpxt6r7W1sZ4dxUq+RLIzglXw4HebPBDBceo9jq4uvxqXbxthfH+MA8ABqwTw9168rBQUBGOE/wZLbeEiG34AiXZi5JAms25Csh1OThvBExlbjLPw1Nhg7bYoEQI2lUZrO12/hpsKDMAVLOUffAV1AM+Yjh7NsgS7xYKaWcgINEqXMxY7QEv8k2Lds9C9sSQOzufS/YDWNTQsDE3eXRvYrOLANLMLQd9GLPvqs+GF7gxgf9Sk0VXE2yEwmGmnutirahI7em+h4xUKQTgkkY2mBDTKFPEyXwEogKp13pADr3/+ornrYaGR7N1iCVBMnHxLdyYd9TJzgHFydKDQYd+r2Hok/WB6Jlzdo2NM2BkJv81hq9/HFfyrqLf98oL/MU+TPbhdICdUZCuhq13+qi9M2gPAJhNBrhNsYDO6mAsOI3z6aMH3RIpRzfO5OZK+goRIMuYa0fUFKwr8V4GiUbzVkmqyow7/VzYA5vXOGgAxQWma5p5Ta+1xYoe88/p3JDdchuEgAKNLxbyrLGq4ye6XGpUZuSY6nYAsN7Fkjz5G/cEVwJYf7RyI=
